import Head from 'next/head'
import { useState } from 'react'
import styles from '@/styles/Home.module.css'


export default function Home() {



  const [userInput, setUserInput] = useState('')
  const [todoList, settodoList] = useState([])

  const handleChange = (e) => {
    e.preventDefault()

    setUserInput(e.target.value)
  }

  const handleSubmit = (e) => {
    e.preventDefault()

    console.log(todoList)

    settodoList([
      userInput,
      ...todoList
    ])

    setUserInput('')

  }

  const handleDelete = (todo) => {
    const updatedArr = todoList.filter(todoItem => todoItem.indexOf(todoItem) != todoList.indexOf(todo))

    settodoList(updatedArr)
  }
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={styles.main}>
        <h1>Todo List</h1>
        <form>
          <input type="text" value={userInput} onChange={handleChange}/>
          <button onClick={handleSubmit}>Add</button>
        </form>

        <ul>
          {
            todoList.length >=1 ? todoList.map((todo, idx) => {
              return <li key={idx}> {todo}<button onClick={(e) => {
                e.preventDefault()
                handleDelete(todo)
              }}>Delete</button></li>
            })
            : "Enter todo item"
          }
        </ul>
      </main>
    </>
  )
}
